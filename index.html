<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zaby Deals</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 font-sans">

<!-- HEADER -->
<header class="bg-black text-white p-4 text-center text-xl font-bold">
ğŸ”¥ Zaby Deals â€“ Best Amazon Offers
</header>

<!-- HERO -->
<section class="bg-gradient-to-r from-orange-400 to-pink-500 text-center p-10 text-white">
<h1 class="text-3xl font-bold mb-3">ğŸ”¥ Best Amazon Deals</h1>
<p class="text-lg">Daily Updated | Save Money ğŸ’°</p>
</section>

<!-- TIMER -->
<section class="bg-red-100 text-center py-3 font-bold text-red-600">
â° Offer Ends In: <span id="timer">10:00</span>
</section>

<!-- SLIDER -->
<section class="max-w-6xl mx-auto mt-6 px-4">
<img id="sliderImg"
class="w-full h-56 object-contain bg-white rounded-xl shadow-lg p-4">
</section>

<!-- SEARCH -->
<section class="max-w-6xl mx-auto mt-6 px-4">
<div class="flex flex-col md:flex-row gap-4">

<input id="searchInput"
type="text"
placeholder="Search product..."
class="flex-1 p-3 border rounded-lg outline-none">

<select id="categoryFilter"
class="p-3 border rounded-lg">

<option value="all">All Categories</option>
<option value="kitchen">Kitchen</option>
<option value="beauty">Beauty</option>
<option value="mobile">Mobile</option>

</select>

</div>
</section>

<!-- PRODUCTS -->
<section class="max-w-7xl mx-auto p-6 space-y-12" id="allSections"></section>

<!-- FOOTER -->
<footer class="bg-black text-white text-center p-4 mt-6 text-sm">
As an Amazon Associate, I earn from qualifying purchases.
</footer>


<!-- SCRIPT -->
<script>

/* ================= CARD ================= */

function card(p){

return `

<div class="relative bg-white rounded-xl shadow-md p-4 hover:shadow-xl transition border">

${p.trending ? `
<div class="absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full">
ğŸ”¥ Trending
</div>` : ""}

<img src="${p.img}" class="h-44 mx-auto object-contain mb-3">

<h2 class="font-semibold text-base mb-1">${p.name}</h2>

<p class="text-sm text-gray-600 mb-2">â‚¹${p.price}</p>

<a href="${p.link}" target="_blank"
class="block bg-gradient-to-r from-orange-400 to-red-500 text-white text-center py-2 rounded-full font-semibold text-sm">

ğŸ›’ Buy on Amazon

</a>

</div>

`;

}


/* ================= RENDER ================= */

function renderSections(list){

const box = document.getElementById("allSections");

box.innerHTML = "";


/* UNDER 100 */

const under100 = list.filter(p=>p.price<=100);

if(under100.length){

box.innerHTML += `
<h2 class="text-2xl font-bold border-l-4 border-red-500 pl-3">
ğŸ”¥ Under â‚¹100 Deals
</h2>

<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6" id="sec-budget"></div>
`;

under100.forEach(p=>{
document.getElementById("sec-budget").innerHTML += card(p);
});

}


/* CATEGORIES */

["kitchen","beauty","mobile"].forEach(cat=>{

const items = list.filter(p=>p.category===cat);

if(items.length){

box.innerHTML += `
<h2 class="text-2xl font-bold border-l-4 border-orange-500 pl-3">
${cat.toUpperCase()}
</h2>

<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6" id="sec-${cat}"></div>
`;

items.forEach(p=>{
document.getElementById(`sec-${cat}`).innerHTML += card(p);
});

}

});

}


/* ================= GOOGLE SHEET LOAD ================= */

const sheetURL =
"https://opensheet.elk.sh/1HZ79NaXAvP_V-5qBMFMIfrQmziXZ2ns-xxVraPKP-XM/Sheet1";

let products = [];

fetch(sheetURL)
.then(res => res.json())
.then(data => {

products = data.map(p => ({

name: p.Name,
price: Number(p.Price),
category: p.Category?.toLowerCase(),
img: p.Image,
link: p.Link,
trending: p.Trending === "yes"

}));

renderSections(products);
startSlider();

})
.catch(err=>{
console.log("Sheet Error:", err);
});


/* ================= SEARCH ================= */

document.getElementById("searchInput")
.addEventListener("input",function(){

const v = this.value.toLowerCase();

const filtered = products.filter(p=>
p.name.toLowerCase().includes(v)
);

renderSections(filtered);

});


/* ================= FILTER ================= */

document.getElementById("categoryFilter")
.addEventListener("change",function(){

if(this.value==="all"){
renderSections(products);
}
else{

const filtered = products.filter(p=>
p.category===this.value
);

renderSections(filtered);

}

});


/* ================= SLIDER ================= */

function startSlider(){

const slides = products.map(p=>p.img);

if(slides.length===0) return;

let i=0;

document.getElementById("sliderImg").src = slides[0];

setInterval(()=>{

i++;

if(i>=slides.length) i=0;

document.getElementById("sliderImg").src = slides[i];

},3000);

}


/* ================= TIMER ================= */

let time = 600;

setInterval(()=>{

let m = Math.floor(time/60);
let s = time%60;

if(s<10) s="0"+s;

document.getElementById("timer").innerText = m+":"+s;

if(time>0) time--;

},1000);

</script>

</body>
</html>
